.PHONY: help install test lint build clean dev watch coverage

# Default target
help:
	@echo "Available targets:"
	@echo "  install   - Install dependencies"
	@echo "  test      - Run tests"
	@echo "  lint      - Run linter"
	@echo "  build     - Build the project"
	@echo "  clean     - Clean generated files"
	@echo "  dev       - Start development server"
	@echo "  watch     - Run tests in watch mode"
	@echo "  coverage  - Generate coverage report"

# Install dependencies
install:
	npm install

# Run tests
test:
	npm test

# Run tests in watch mode
watch:
	npm run test:watch

# Run linter
lint:
	npm run lint

# Build the project
build:
	npm run build

# Start development server
dev:
	npm run dev

# Generate coverage report
coverage:
	npm run test -- --coverage

# Clean generated files
clean:
	rm -rf dist/
	rm -rf coverage/
	rm -rf .nyc_output/
	rm -rf lib/

# Full setup
setup: clean install test

# CI pipeline
ci: install lint test build